import{r as u,u as L,j as s,R as x,D as R,a as b,B as D,b as H,c as B,d as p}from"./index-pzd77Z4S.js";import{H as z,T as A,a as F,b as w,c as g,d as M,e as j}from"./Helmet-WtT2JHsX.js";import{u as _}from"./index-B2GkG6WS.js";import{C as I}from"./checkbox-BYrcEh8-.js";import{L as K}from"./label-ksYLtnI-.js";import{C as $}from"./chevron-down-BGceiLfB.js";const V=["name","date","class","grade","place","ground","distance","distanceType","direction","side"],O=["name","date","class","grade","ground","distanceType"],S={name:"名称",date:"时间",class:"年级",grade:"赛事等级",place:"地点",ground:"场地",distance:"长度",distanceType:"赛程",direction:"方向",side:"赛道"},U=({type:f,onSelect:d})=>{const[c,o]=u.useState([]),[r,y]=u.useState({}),{t:T}=L(),l=_(),C=(()=>{const[e,t]=p.useState(window.innerHeight);return p.useEffect(()=>{const n=()=>t(window.innerHeight);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{height:e}})().height-168;if(!l)return null;const h=l.get("races").value().map((e,t)=>({...e,key:t})),v=h.filter(e=>Object.entries(r).every(([t,n])=>n.length?n.includes(e[t]):!0)),k=(e,t)=>{const n=t?[...c,e]:c.filter(i=>i!==e);if(o(n),d){const i={};h.filter(a=>n.includes(a.key)).forEach(a=>{i[a.dateNum]?i[a.dateNum].push(a.id):i[a.dateNum]=[a.id]}),d(i)}},N=(e,t)=>{y(n=>({...n,[e]:t})),o([]),d==null||d([])},m=f==="medium"?O:V;return s.jsxs("div",{className:"w-full overflow-x-auto",children:[s.jsx(z,{children:s.jsx("title",{children:"比赛 - 乌拉拉大胜利 - 赛马娘资料站"})}),s.jsx("div",{className:"rounded-md border",children:s.jsxs(A,{children:[s.jsx(F,{children:s.jsxs(w,{children:[d&&s.jsx(g,{className:"w-12",children:s.jsx(K,{className:"sr-only",children:"Select"})}),m.map(e=>s.jsx(g,{className:e==="name"?"sticky left-0 bg-white":"",children:s.jsxs("div",{className:"flex items-center",children:[T(S[e]),x[e]&&s.jsxs(R,{children:[s.jsx(b,{asChild:!0,children:s.jsx(D,{variant:"ghost",size:"sm",className:"ml-1 h-6 p-1",children:s.jsx($,{className:"h-3 w-3"})})}),s.jsx(H,{align:"end",children:x[e].map(t=>{var n;return s.jsx(B,{checked:(n=r[e])==null?void 0:n.includes(t.value),onCheckedChange:i=>{const a=i?[...r[e]||[],t.value]:(r[e]||[]).filter(E=>E!==t.value);N(e,a)},children:t.text},t.value)})})]})]})},e))]})}),s.jsx(M,{style:{maxHeight:`${C}px`,overflowY:"auto"},children:v.map(e=>s.jsxs(w,{children:[d&&s.jsx(j,{className:"sticky left-0 bg-white",children:s.jsx(I,{checked:c.includes(e.key),onCheckedChange:t=>k(e.key,t)})}),m.map(t=>s.jsx(j,{className:t==="name"?"sticky left-12 bg-white":"",children:e[t]},`${e.key}-${t}`))]},e.key))})]})})]})};export{U as default};
