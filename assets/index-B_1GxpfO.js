import{r as u,u as L,a as R,R as x,j as s,b as p,D as b,c as D,B as H,d as B,e as z}from"./index-CHFdcAZY.js";import{H as A,T as F,a as M,b as w,c as g,d as _,e as j}from"./Helmet-CTbH9n_v.js";import{C as I}from"./checkbox-yGoHwN5s.js";import{L as K}from"./label-DqdA6Z2J.js";import{C as $}from"./chevron-down-Bt4gKERW.js";const V=["name","date","class","grade","place","ground","distance","distanceType","direction","side"],O=["name","date","class","grade","ground","distanceType"],S={name:"名称",date:"时间",class:"年级",grade:"赛事等级",place:"地点",ground:"场地",distance:"长度",distanceType:"赛程",direction:"方向",side:"赛道"},Q=({type:f,onSelect:d})=>{const[c,o]=u.useState([]),[r,y]=u.useState({}),{t:T}=L(),{db:l}=R(),C=(()=>{const[e,t]=x.useState(window.innerHeight);return x.useEffect(()=>{const n=()=>t(window.innerHeight);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{height:e}})().height-168;if(!l)return null;const h=l.get("races").value().map((e,t)=>({...e,key:t})),v=h.filter(e=>Object.entries(r).every(([t,n])=>n.length?n.includes(e[t]):!0)),k=(e,t)=>{const n=t?[...c,e]:c.filter(i=>i!==e);if(o(n),d){const i={};h.filter(a=>n.includes(a.key)).forEach(a=>{i[a.dateNum]?i[a.dateNum].push(a.id):i[a.dateNum]=[a.id]}),d(i)}},N=(e,t)=>{y(n=>({...n,[e]:t})),o([]),d==null||d([])},m=f==="medium"?O:V;return s.jsxs("div",{className:"w-full overflow-x-auto",children:[s.jsx(A,{children:s.jsx("title",{children:"比赛 - 乌拉拉大胜利 - 赛马娘资料站"})}),s.jsx("div",{className:"rounded-md border",children:s.jsxs(F,{children:[s.jsx(M,{children:s.jsxs(w,{children:[d&&s.jsx(g,{className:"w-12",children:s.jsx(K,{className:"sr-only",children:"Select"})}),m.map(e=>s.jsx(g,{className:e==="name"?"sticky left-0 bg-white":"",children:s.jsxs("div",{className:"flex items-center",children:[T(S[e]),p[e]&&s.jsxs(b,{children:[s.jsx(D,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm",className:"ml-1 h-6 p-1",children:s.jsx($,{className:"h-3 w-3"})})}),s.jsx(B,{align:"end",children:p[e].map(t=>{var n;return s.jsx(z,{checked:(n=r[e])==null?void 0:n.includes(t.value),onCheckedChange:i=>{const a=i?[...r[e]||[],t.value]:(r[e]||[]).filter(E=>E!==t.value);N(e,a)},children:t.text},t.value)})})]})]})},e))]})}),s.jsx(_,{style:{maxHeight:`${C}px`,overflowY:"auto"},children:v.map(e=>s.jsxs(w,{children:[d&&s.jsx(j,{className:"sticky left-0 bg-white",children:s.jsx(I,{checked:c.includes(e.key),onCheckedChange:t=>k(e.key,t)})}),m.map(t=>s.jsx(j,{className:t==="name"?"sticky left-12 bg-white":"",children:e[t]},`${e.key}-${t}`))]},e.key))})]})})]})};export{Q as default};
